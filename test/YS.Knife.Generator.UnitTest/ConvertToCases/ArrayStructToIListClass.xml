<?xml version="1.0" encoding="utf-8" ?>
<case>
    <input>
        <code>
            <![CDATA[
using System.Collections.Generic;
namespace ConsoleApp2
{
    public class UserInfo
    {
        public string Name { get; set; }
        public IList<AddressInfo> Addresses {get; set;}
    }
    public class AddressInfo
    {
        public string City { get; set; }
    }

    public partial class TUser
    {
        public string Name { get; set; }
        public AddressDto[] Addresses {get; set;}
    }
     public struct AddressDto
    {
        public string City { get; set; }
    }
}
            
            ]]>
        </code>
        <code>
            <![CDATA[
using YS.Knife;
using YS.Knife.Generator.UnitTest;
namespace ConsoleApp2
{
    [ConvertToAttribute(typeof(TUser), typeof(UserInfo))]
    partial class Convertors
    {

    }
}
        ]]>
        </code>
    </input>
    <output>
        <code file="Convertors.g.cs">
            <![CDATA[
using System.Collections.Generic;
using System.Linq;
namespace ConsoleApp2
{
    static partial class Convertors
    {
        public static global::ConsoleApp2.UserInfo ToUserInfo(this global::ConsoleApp2.TUser source)
        {
            if (source == null) return default;
            return new global::ConsoleApp2.UserInfo
            {
                Name = source.Name,
                Addresses = source.Addresses == null ? null : source.Addresses.Select(p => new global::ConsoleApp2.AddressInfo
                {
                    City = p.City,
                }).ToList(),
            };
        }
        public static void ToUserInfo(this global::ConsoleApp2.TUser source, global::ConsoleApp2.UserInfo target)
        {
            if (source == null) return;
            if (target == null) return;
            target.Name = source.Name;
            target.Addresses = source.Addresses == null ? null : source.Addresses.Select(p => new global::ConsoleApp2.AddressInfo
            {
                City = p.City,
            }).ToList();
        }
        public static IEnumerable<global::ConsoleApp2.UserInfo> ToUserInfo(this IEnumerable<global::ConsoleApp2.TUser> source)
        {
            return source?.Select(p => new global::ConsoleApp2.UserInfo
            {
                Name = p.Name,
                Addresses = p.Addresses == null ? null : p.Addresses.Select(p => new global::ConsoleApp2.AddressInfo
                {
                    City = p.City,
                }).ToList(),
            });
        }
        public static IQueryable<global::ConsoleApp2.UserInfo> ToUserInfo(this IQueryable<global::ConsoleApp2.TUser> source)
        {
            return source?.Select(p => new global::ConsoleApp2.UserInfo
            {
                Name = p.Name,
                Addresses = p.Addresses == null ? null : p.Addresses.Select(p => new global::ConsoleApp2.AddressInfo
                {
                    City = p.City,
                }).ToList(),
            });
        }
    }
}
            ]]>
        </code>
    </output>
</case>